"use strict";function init(){function e(e){var o=e.apphash,r=t.getProjectByHash(o),a=r.isTourist,i=r.urlCheck,n=!0;return a?n=!1:i||(n=!1),n}function o(o,r){var a=o.args,l=t.getCurrentProjectConfig();return n>=l.Setting.MaxUploadConcurrent?void r({errMsg:"uploadFile:fail exceed max upload connection count "+l.Setting.MaxUploadConcurrent}):(n++,a.tlsVersionCheck=e(o),a.callback=function(e,o,t){r(e?e&&"EPROTO"===e.code?{errMsg:"uploadFile:fail 小程序要求的 TLS 版本必须大于等于 1.2"}:{errMsg:"uploadFile:fail "+e}:{errMsg:"uploadFile:ok",data:t,statusCode:o.statusCode}),n--},void i.uploadFileToServer(a))}function r(o,r){var n=o.args,s=t.getCurrentProjectConfig();if(l>=s.Setting.MaxDownloadConcurrent)return void r({errMsg:"downloadFile:fail exceed max download connection count "+s.Setting.MaxDownloadConcurrent});l++;var u=t.getCurrentProject();n.tlsVersionCheck=e(o),n.callback=function(e,o,t){var s=a.extname(n.url);if(e)r(e&&"EPROTO"===e.code?{errMsg:"downloadFile:fail 小程序要求的 TLS 版本必须大于等于 1.2"}:{errMsg:"downloadFile:fail "+e});else{var d=i.copyFileDataToTemp(t,u.hash,s);r({errMsg:"downloadFile:ok",tempFilePath:d,statusCode:o.statusCode})}l--},i.downloadFileFormServer(n)}var t=(require("../../actions/webviewActions.js"),require("../../stores/projectStores.js")),a=require("path"),i=require("../../utils/file"),n=0,l=0;_exports={downloadFile:r,uploadFile:o}}var _exports;init(),module.exports=_exports;